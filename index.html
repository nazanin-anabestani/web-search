<link rel="stylesheet" href="androidstudio.css">
<script src="highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<link href="styles.css" type="text/css" rel="stylesheet">
<h1>خلاصه</h1>
<p>
    دو نوع کد زدن می‌توان در نظر گرفت ، همزمان و غیر همزمان.
    برنامه نویسی همزمان آسان‌تر است اما نکته ای که وجود دارد این است که باعث می‌شود زمان زیادی بقیه‌ی برنامه
    منتظر بایستد تا کار یک بخش تمام شود. کار خوبی که می‌توان کرد
    این است که آن بخش را به طور غیر همزمان برنامه‌نویسی کرد
    تا این بخش اجرا شود و سپس نتیجه‌ی آن اعلام شود.
</p>
<p>
    در جاوا اسکریپت برای این کار می‌توان از promise ها استفاده کرد.
    Promise ها به این صورت استفاده می‌شوند که ابتدا لازم است تا یک promise ایجاد شود. Promise ها دارای دو function هستند :‌ reject و resolve. در برنامه‌ی خود
    اصولا زمانی که موفق بوده باشیم resolve را صدا می‌زنیم و نتیجه‌ی برنامه
    را به بیرون پاس می‌دهیم و اگر به مشکل برخورده بودیم reject را استفاده
    خواهیم کرد تا پاسخ مناسب را پاس دهیم.
    برای مثال :‌
</p>
<pre>
    <code class="html">
    var p = new Promise(function(resolve, reject) {
    if(/* good condition */) {
    resolve('Success!');
    }else {
    reject('Failure!');}});

</code>
</pre>
<p>
    حالا هنگام استفاده از promise به ازای موفق بودن و یا اررور خوردن
    می‌خواهیم کار‌های متفاوتی انجام دهیم. برای واکنش نشان دادن به
    موفقیت از then استفاده می‌کنیم و پاسخی را که گرفته‌شده دریافت می‌کنیم و اعمال لازم
    را انجام می‌دهیم. برای هندل کردن ارور ها هم از catch استفاده خواهیم کرد
    و با توجه به پاسخ مورد نظر که به ما پاس داده شده است
    آن را به طور مناسب هندل می‌کنیم.
    برای مثال :‌
</p>
<pre>
    <code>
    p.then(function(response) {
    /* do something with the result */
    }).catch(function(reason) {
    /* error :( */ });
    </code>
</pre>
<p>
    این مدل کلی استفاده کردن از promise ها بود
    و نکته‌ی دیگر اینکه می‌توان promise را new نکرد
    و مستقیم از Promise.resolve و یا Promise.reject استفاده کرد.
    <br/>
    یکی دیگر از مدل‌های استفاده‌ی promise این است که بخواهیم چندین درخواست را
    به طور async بدهیم و زمانی که نتیجه‌ی همه‌ی آن‌ها آمد کاری را انجام بدهیم.
    این کار را می‌توان با پاس‌ دادن یک آرایه از promise ها به فانکشن Promise.all و سپس گرفتن
    آرایه‌ی نتایج آنها در then و catch انجام داد. اما ممکن است بخواهیم چندین درخواست
    را بفرستیم و هرموقع اولین آنها آمد کار‌ خود را انجام دهیم. این کار
    به کمک فانشکن Promise.race انجام داد که استفاده‌ی آن مانند Promise.all است.
    <br/>
    یکی دیگر از نکاتی که برنامه نویسی با promise هارا برای ما جذاب تر می‌کند
    این است که آنها به صورت زنجیری می‌توانند کار کنند. برای‌مثال :
</p>
<pre>
    <code>
    p.then(function(response) {
    /* do something with the result */
    return response;
    }).then(function(response1){
    console.log(response1);
    Return response1;
    })
    .catch(function(reason) {
    /* error :( */ });
    </code>
</pre>
<p>
    همان طور که می‌بینیم در کد بالا باتوجه به نتیجه‌ی p اگر
    موفق باشیم اولین then و باز اگر موفق باشیم دومین then و .. به همین
    ترتیب پشت سر هم then ها می‌توانند صدا شوند، با نتیجه‌ی آن ها
    چیزی بررسی شود و نتیجه‌ی جدیدی اعلام شود و به‌همین ترتیب و اگر هرکدام از این مراحل
    به مشکلی بخورند catch نهایی صدا خواهد شد.
</p>

<h1>نتیجه و تحلیل</h1>

<p>
    همان طور که دیدیم برنامه نوشتن به صورت async ممکن است سخت و
    دشوار به نظر برسد اما در واقع عملکرد را بسیار بهبود داده است.
    مخصوصا برای کدهای js که اکثرا قرار است در بروزر اجرا شود این مساله بسیار چشمگیر است.
    خوبی این نوع برنامه نویسی است که کل اپلیکیشن نوشته شده منتظر نمی‌ماند تا یک درخواست پاسخ داده
    شود و بعد بقیه‌ی کار ها انجام شود بلکه کارها برنامه ریزی شده پیش می‌روند
    و آن درخواست زمان‌بر هم زمانی که نتیجه اش آمد نتیجه‌اش اعمال می‌شود.
    در وب اپلیکیشن ها کاربر نیاز دارد این را ببیند که برنامه در حال پیش رفتن است
    و یخ نزده است! برای مثال فرض کنید که می‌خواهیم تعدادی عکس و فیلم را از سرور گرفته
    و نمایش دهیم و درخواست برای هرکدام باید جدا باید داده شود. اگر ما بخواهیم مدت زیادی صبر کنیم
    تا به ترتیب همه‌ی درخواست‌ها جواب داده شوند و بعد صفحه لود شود کاربر ممکن است
    خسته شود و زمانش هدر برود. اما با کمک async کد زدن می‌توان همه‌ی درخواست‌ها را فرستاد
    و هرکدام که آمد آن را در صفحه لود کنیم. بنابراین کم کم بخش‌های مختلف صفحه لود خواهد شد
    و کاربر این پیشرفت را حس می‌کند. با استفاده از promise ها toolهای بسیاری ساخته
    شده است که برنامه نویسی را برای ما آسان کرده‌اند.
</p>